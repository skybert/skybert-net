#+title: Jasper Reports

Here are my notes on using Jasper Reports and iReporter.

* java.io.StreamCorruptedException: invalid stream header: 3C3F786D
Jasper iReporter gave strange errors like this:
#+begin_src text
net.sf.jasperreports.engine.JRRuntimeException: net.sf.jasperreports.engine.JRException: Error loading object from InputStream
  at net.sf.jasperreports.repo.SerializedObjectPersistenceService.load(SerializedObjectPersistenceService.java:65)
  at net.sf.jasperreports.repo.SerializedReportPersistenceService.load(SerializedReportPersistenceService.java:46)
  at net.sf.jasperreports.repo.DefaultRepositoryService.getResource(DefaultRepositoryService.java:187)
  at net.sf.jasperreports.repo.RepositoryUtil.getResourceFromLocation(RepositoryUtil.java:246)
  at net.sf.jasperreports.repo.RepositoryUtil.getReport(RepositoryUtil.java:208)
  at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateReport(JRFillSubreport.java:336)
  at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateSubreport(JRFillSubreport.java:369)
  at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluate(JRFillSubreport.java:294)
  at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:259)
  at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:456)
  at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2057)
  at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:778)
  at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:288)
  at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:151)
  at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:939)
  at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:871)
  at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:114)
  at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:653)
  at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:569)
  at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:915)
  at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:928)
  at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)
  at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997)
Caused by: net.sf.jasperreports.engine.JRException: Error loading object from InputStream
  at net.sf.jasperreports.engine.util.JRLoader.loadObject(JRLoader.java:249)
  at net.sf.jasperreports.engine.util.JRLoader.loadObject(JRLoader.java:229)
  at net.sf.jasperreports.repo.SerializedObjectPersistenceService.load(SerializedObjectPersistenceService.java:61)
  ... 22 more
Caused by: java.io.StreamCorruptedException: invalid stream header: 3C3F786D
#+end_src

** Solution
The reason was that I tried to include another JRXML file in using the
=<subreportExpression/>= element using the exact file name,
i.e. =file.jrxml= instead of =file.jasper= as the iReporter/Jasper
Reports processor requires.

